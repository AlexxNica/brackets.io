<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html"> API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">
          <div class="page-header">
            <h1>FindInFiles</h1>
          </div>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <ul class="nav nav-list">
              <li class="nav-header">
                <a href="#" id="toggle-other-modules"><i class="icon-folder-close"></i> Modules (140)</a>
              </li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i></a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/brackets.html">brackets</a></li>
              <li><a href="../../modules/dependencies.html">dependencies</a></li>
              <li><a href="../../modules/main.html">main</a></li>
              <li><a href="../../modules/strings.html">strings</a></li>
              <li><a href="../../modules/xorigin.html">xorigin</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_command"><i class="icon-folder-open"></i>command</a>
              </li>
            </ul>
            <ul id="package_command" class="nav nav-list">
              <li><a href="../../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../modules/command/Commands.html">Commands</a></li>
              <li><a href="../../modules/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../modules/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../modules/command/Menus.html">Menus</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_document"><i class="icon-folder-open"></i>document</a>
              </li>
            </ul>
            <ul id="package_document" class="nav nav-list">
              <li><a href="../../modules/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../modules/document/Document.html">Document</a></li>
              <li><a href="../../modules/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../modules/document/TextRange.html">TextRange</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_editor"><i class="icon-folder-open"></i>editor</a>
              </li>
            </ul>
            <ul id="package_editor" class="nav nav-list">
              <li><a href="../../modules/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../modules/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../modules/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../modules/editor/Editor.html">Editor</a></li>
              <li><a href="../../modules/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../modules/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../modules/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../modules/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../modules/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../modules/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../modules/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_extensibility"><i class="icon-folder-open"></i>extensibility</a>
              </li>
            </ul>
            <ul id="package_extensibility" class="nav nav-list">
              <li><a href="../../modules/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../modules/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../modules/extensibility/Package.html">Package</a></li>
              <li><a href="../../modules/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_file"><i class="icon-folder-open"></i>file</a>
              </li>
            </ul>
            <ul id="package_file" class="nav nav-list">
              <li><a href="../../modules/file/FileUtils.html">FileUtils</a></li>
              <li><a href="../../modules/file/NativeFileError.html">NativeFileError</a></li>
              <li><a href="../../modules/file/NativeFileSystem.html">NativeFileSystem</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem"><i class="icon-folder-open"></i>filesystem</a>
              </li>
            </ul>
            <ul id="package_filesystem" class="nav nav-list">
              <li><a href="../../modules/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../modules/filesystem/File.html">File</a></li>
              <li><a href="../../modules/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../modules/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../modules/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../modules/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell"><i class="icon-folder-open"></i>filesystem.impls.appshell</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>filesystem.impls.appshell.node</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_help"><i class="icon-folder-open"></i>help</a>
              </li>
            </ul>
            <ul id="package_help" class="nav nav-list">
              <li><a href="../../modules/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_language"><i class="icon-folder-open"></i>language</a>
              </li>
            </ul>
            <ul id="package_language" class="nav nav-list">
              <li><a href="../../modules/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../modules/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../modules/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../modules/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../modules/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../modules/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../modules/language/LanguageManager.html">LanguageManager</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Agents"><i class="icon-folder-open"></i>LiveDevelopment.Agents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Documents"><i class="icon-folder-open"></i>LiveDevelopment.Documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>LiveDevelopment.Inspector</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment"><i class="icon-folder-open"></i>LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../modules/LiveDevelopment/main.html">main</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Servers"><i class="icon-folder-open"></i>LiveDevelopment.Servers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_preferences"><i class="icon-folder-open"></i>preferences</a>
              </li>
            </ul>
            <ul id="package_preferences" class="nav nav-list">
              <li><a href="../../modules/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../modules/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
              <li><a href="../../modules/preferences/PreferenceStorage.html">PreferenceStorage</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_project"><i class="icon-folder-open"></i>project</a>
              </li>
            </ul>
            <ul id="package_project" class="nav nav-list">
              <li><a href="../../modules/project/FileIndexManager.html">FileIndexManager</a></li>
              <li><a href="../../modules/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../modules/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../modules/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../modules/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search"><i class="icon-folder-open"></i>search</a>
              </li>
            </ul>
            <ul id="package_search" class="nav nav-list">
              <li><a href="../../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../modules/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../modules/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../modules/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_utils"><i class="icon-folder-open"></i>utils</a>
              </li>
            </ul>
            <ul id="package_utils" class="nav nav-list">
              <li><a href="../../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../modules/utils/Async.html">Async</a></li>
              <li><a href="../../modules/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../modules/utils/CollectionUtils.html">CollectionUtils</a></li>
              <li><a href="../../modules/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../modules/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../modules/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../modules/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../modules/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../modules/utils/Global.html">Global</a></li>
              <li><a href="../../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../modules/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../modules/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../modules/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../modules/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../modules/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../modules/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../modules/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../modules/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../modules/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../modules/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_view"><i class="icon-folder-open"></i>view</a>
              </li>
            </ul>
            <ul id="package_view" class="nav nav-list">
              <li><a href="../../modules/view/PanelManager.html">PanelManager</a></li>
              <li><a href="../../modules/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
            </ul>
                        <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_widgets"><i class="icon-folder-open"></i>widgets</a>
              </li>
            </ul>
            <ul id="package_widgets" class="nav nav-list">
              <li><a href="../../modules/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../modules/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../modules/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../modules/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../modules/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../modules/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../modules/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../modules/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../modules/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../modules/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../modules/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../modules/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../modules/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
            
          </div>
        </div>
        <div class="module span9">
          <section class="description">
            <h3>Description</h3>
            <div>
              <p>Adds a &quot;find in files&quot; command to allow the user to find all occurrences of a string in all files in
the project.</p>
<p>The keyboard shortcut is Cmd(Ctrl)-Shift-F.</p>
<p>FUTURE:</p>
<ul>
<li>Proper UI for both dialog and results</li>
<li>Refactor dialog class and share with Quick File Open</li>
<li>Search files in working set that are <em>not</em> in the project</li>
<li>Handle matches that span multiple lines</li>
<li>Refactor UI from functionality to enable unit testing</li>
</ul>

            </div>
          </section>
    
          <section class="dependencies">
            <h3>Dependencies</h3>
            
            <ul class="nav nav-list">
              <li><a href="..&#x2F;../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="..&#x2F;../modules/utils/Async.html">Async</a></li>
              <li><a href="..&#x2F;../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="..&#x2F;../modules/command/Commands.html">Commands</a></li>
              <li><a href="..&#x2F;../modules/document/Document.html">Document</a></li>
              <li><a href="..&#x2F;../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="..&#x2F;../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="..&#x2F;../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="..&#x2F;../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="..&#x2F;../modules/file/FileUtils.html">FileUtils</a></li>
              <li><a href="..&#x2F;../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="..&#x2F;../modules/text!htmlContent/findinfiles-bar.html.html">findinfiles-bar.html</a></li>
              <li><a href="..&#x2F;../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="..&#x2F;../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="..&#x2F;../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="..&#x2F;../modules/language/LanguageManager.html">LanguageManager</a></li>
              <li><a href="..&#x2F;../modules/thirdparty/lodash.html">lodash</a></li>
              <li><a href="..&#x2F;../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="..&#x2F;../modules/view/PanelManager.html">PanelManager</a></li>
              <li><a href="..&#x2F;../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="..&#x2F;../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
              <li><a href="..&#x2F;../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="..&#x2F;../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="..&#x2F;../modules/text!htmlContent/search-panel.html.html">search-panel.html</a></li>
              <li><a href="..&#x2F;../modules/text!htmlContent/search-results.html.html">search-results.html</a></li>
              <li><a href="..&#x2F;../modules/text!htmlContent/search-summary.html.html">search-summary.html</a></li>
              <li><a href="..&#x2F;../modules/widgets/StatusBar.html">StatusBar</a></li>
              <li><a href="..&#x2F;../modules/strings.html">strings</a></li>
              <li><a href="..&#x2F;../modules/utils/StringUtils.html">StringUtils</a></li>
            </ul>
            
            
          </section>
    
            <section class="variables">
              <h3>Variables 
                <label class="checkbox">
                  <input class="toggle-public" type="checkbox"> Show Private Members
                </label>
              </h3>
              
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>$searchResults</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {$.Element} jQuery elements used in the search results</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var $searchResults,
        $searchSummary,
        $searchContent,
        $selectedRow;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>RESULTS_PER_PAGE</h4>
                <dl>
                </dl>
                <div class="description"><p>@const Constants used to define the maximum results show per page and found in a single file</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var RESULTS_PER_PAGE = 100,
        FIND_IN_FILE_MAX = 300,
        UPDATE_TIMEOUT   = 400;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>ZERO_FILES_TO_SEARCH</h4>
                <dl>
                </dl>
                <div class="description"><p>@const @type {!Object} Token used to indicate a specific reason for zero search results</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var ZERO_FILES_TO_SEARCH = {};</code></pre>
              </div>
              <div class="member private">
      
                <span class="pull-right scope">
                  Private
                  
                </span>
                <h4>_documentChangeHandler</h4>
                <dl>
                    <dt>Type</dt>
                      <dd>Function</dd>
                    <dt>Private</dt>
                </dl>
                <div class="description"><p>Updates the search results in response to (unsaved) text edits. (Declared here to appease JSLint)</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var _documentChangeHandler;</code></pre>
              </div>
              <div class="member private">
      
                <span class="pull-right scope">
                  Private
                  
                </span>
                <h4>_fileSystemChangeHandler</h4>
                <dl>
                    <dt>Type</dt>
                      <dd>Function</dd>
                    <dt>Private</dt>
                </dl>
                <div class="description"><p>Updates search results in response to FileSystem &quot;change&quot; event. (Declared here to appease JSLint)</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var _fileSystemChangeHandler;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>currentFilter</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {string} Compiled filter from FileFilters</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var currentFilter = null;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>currentQuery</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {string} The current search query</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var currentQuery = &quot;&quot;;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>currentQueryExpr</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {RegExp} The current search query regular expression</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var currentQueryExpr = null;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>currentScope</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {?FileSystemEntry} Root of subtree to search in, or single file to search in, or null to search entire project</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var currentScope = null;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>currentStart</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {number} The index of the first result that is displayed</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var currentStart = 0;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>dialog</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {FindInFilesDialog} dialog having the modalbar for search</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var dialog = null;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>maxHitsFoundInFile</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {boolean} True if the matches in a file reached FIND_IN_FILE_MAX</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var maxHitsFoundInFile = false;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>searchFiles</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {Array.&lt;string&gt;} Keeps a copy of the searched files sorted by name and with the selected file first</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var searchFiles = [];</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>searchResults</h4>
                <dl>
                    <dt>Type</dt>
                      <dd>Object.&lt;fullPath: string, {matches: Array.&lt;Object&gt;, collapsed: boolean}&gt;</dd>
                </dl>
                <div class="description"><p>Map of all the last search results</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var searchResults = {};</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>searchResultsPanel</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {Panel} Bottom panel holding the search results. Initialized in htmlReady()</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var searchResultsPanel;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>selectedEntry</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {Entry} the File selected on the initial search</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var selectedEntry;</code></pre>
              </div>
              <div class="member">
      
                <span class="pull-right scope">
                  
                  
                </span>
                <h4>timeoutID</h4>
                <dl>
                </dl>
                <div class="description"><p>@type {string} The setTimeout id, used to clear it if required</p>
</div>
                <button class="btn btn-small show-code">Show code</button>
                <pre class="language-javascript"><code class="language-javascript">var timeoutID = null;</code></pre>
              </div>
              
            </section>
    
          <section class="functions">
            <h3>Functions 
              <label class="checkbox">
                <input class="toggle-public" type="checkbox"> Show Private Members
              </label>
            </h3>
            
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_addListeners</h4>
              <div class="description"><p>Add listeners to track events that might change the search result set</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _addListeners() {
        &#x2F;&#x2F; Avoid adding duplicate listeners - e.g. if a 2nd search is run without closing the old results panel first
        _removeListeners();
        
        $(DocumentModule).on(&quot;documentChange.findInFiles&quot;, _documentChangeHandler);
        FileSystem.on(&quot;change&quot;, _fileSystemChangeHandler);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_addSearchMatches</h4>
              <div class="description"><p>Searches and stores the match results for the given file, if there are matches</p>
</div>
              <dl>
                  <dt>fullPath</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd></dd>
                  <dt>contents</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd></dd>
                  <dt>queryExpr</dt>
                  <dd class="label label-info pull-left">RegExp</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _addSearchMatches(fullPath, contents, queryExpr) {
        var matches = _getSearchMatches(contents, queryExpr);
        
        if (matches &amp;&amp; matches.length) {
            searchResults[fullPath] = {
                matches:   matches,
                collapsed: false
            };
            return true;
        }
        return false;
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_addSearchResultsForEntry</h4>
              <div class="description"><p>Add new search results for this entry and all of its children</p>
</div>
              <dl>
                  <dt>entry</dt>
                  <dd class="label label-info pull-left">(File,Directory)</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _addSearchResultsForEntry(entry) {
            var addedFiles = [],
                deferred = new $.Deferred();
            
            &#x2F;&#x2F; gather up added files
            var visitor = function (child) {
                &#x2F;&#x2F; Replicate filtering that getAllFiles() does
                if (ProjectManager.shouldShow(child)) {
                    if (child.isFile &amp;&amp; _isReadableText(child.name)) {
                        &#x2F;&#x2F; Re-check the filtering that the initial search applied
                        if (_inSearchScope(child)) {
                            addedFiles.push(child);
                        }
                    }
                    return true;
                }
                return false;
            };
    
            entry.visit(visitor, function (err) {
                if (err) {
                    deferred.reject(err);
                    return;
                }
                
                &#x2F;&#x2F; find additional matches in all added files
                Async.doInParallel(addedFiles, function (file) {
                    return _doSearchInOneFile(file)
                        .done(function (foundMatches) {
                            resultsChanged = resultsChanged || foundMatches;
                        });
                }).always(deferred.resolve);
            });
    
            return deferred.promise();
        }
        
        if (!entry) {
            &#x2F;&#x2F; TODO: re-execute the search completely?
            return;
        }
        
        var addPromise;
        if (entry.isDirectory) {
            if (!added || !removed) {
                &#x2F;&#x2F; If the added or removed sets are null, must redo the search for the entire subtree - we
                &#x2F;&#x2F; don&#39;t know which child files&#x2F;folders may have been added or removed.
                _removeSearchResultsForEntry(entry);
                
                var deferred = $.Deferred();
                addPromise = deferred.promise();
                entry.getContents(function (err, entries) {
                    Async.doInParallel(entries, _addSearchResultsForEntry).always(deferred.resolve);
                });
            } else {
                removed.forEach(_removeSearchResultsForEntry);
                addPromise = Async.doInParallel(added, _addSearchResultsForEntry);
            }
        } else { &#x2F;&#x2F; entry.isFile
            _removeSearchResultsForEntry(entry);
            addPromise = _addSearchResultsForEntry(entry);
        }
        
        addPromise.always(function () {
            &#x2F;&#x2F; Restore the results if needed
            if (resultsChanged) {
                _sortResultFiles();
                _restoreSearchResults();
            }
        });
    };
    
    
    &#x2F;&#x2F; Initialize items dependent on HTML DOM
    AppInit.htmlReady(function () {
        var panelHtml = Mustache.render(searchPanelTemplate, Strings);
        searchResultsPanel = PanelManager.createBottomPanel(&quot;find-in-files.results&quot;, $(panelHtml), 100);
        
        $searchResults = $(&quot;#search-results&quot;);
        $searchSummary = $searchResults.find(&quot;.title&quot;);
        $searchContent = $(&quot;#search-results .table-container&quot;);
    });
    
    &#x2F;&#x2F; Initialize: register listeners
    $(DocumentManager).on(&quot;fileNameChange&quot;,    _fileNameChangeHandler);
    $(ProjectManager).on(&quot;beforeProjectClose&quot;, _hideSearchResults);
    
    FindReplace._registerFindInFilesCloser(function () {
        if (dialog) {
            dialog._close(true);
        }
    });
    
    &#x2F;&#x2F; Initialize: command handlers
    CommandManager.register(Strings.CMD_FIND_IN_FILES,      Commands.CMD_FIND_IN_FILES,     _doFindInFiles);
    CommandManager.register(Strings.CMD_FIND_IN_SELECTED,   Commands.CMD_FIND_IN_SELECTED,  _doFindInSubtree);
    CommandManager.register(Strings.CMD_FIND_IN_SUBTREE,    Commands.CMD_FIND_IN_SUBTREE,   _doFindInSubtree);
    
    &#x2F;&#x2F; For unit testing
    exports._doFindInFiles = _doFindInFiles;
    exports._searchResults = null;
});</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_countFilesMatches</h4>
              <div class="description"><p>Counts the total number of matches and files</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _countFilesMatches() {
        var numFiles = 0, numMatches = 0;
        _.forEach(searchResults, function (item) {
            numFiles++;
            numMatches += item.matches.length;
        });

        return {files: numFiles, matches: numMatches};
    }</code></pre>
            </div>
            <div class="member private public">
              <span class="pull-right scope">
                Private
                Public API
              </span>
              <h4>_doFindInFiles</h4>
              <div class="description"><p>Displays a non-modal embedded dialog above the code mirror editor that allows the user to do
a find operation across all files in the project.</p>
</div>
              <dl>
                  <dt>scope</dt>
                    <span class="label label-nullable pull-left">nullable</span>
                  <dd class="label label-info pull-left">Entry</dd>
                  <dd>Project file/subfolder to search within; else searches whole project.</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _doFindInFiles(scope) {
        &#x2F;&#x2F; If the scope is a file with a custom viewer, then we
        &#x2F;&#x2F; don&#39;t show find in files dialog.
        if (scope &amp;&amp; EditorManager.getCustomViewerForPath(scope.fullPath)) {
            return;
        }
        
        if (scope instanceof InMemoryFile) {
            CommandManager.execute(Commands.FILE_OPEN, { fullPath: scope.fullPath }).done(function () {
                CommandManager.execute(Commands.CMD_FIND);
            });
            return;
        }
        
        &#x2F;&#x2F; Default to searching for the current selection
        var currentEditor = EditorManager.getActiveEditor(),
            initialString = currentEditor &amp;&amp; currentEditor.getSelectedText();

        if (dialog &amp;&amp; !dialog.closed &amp;&amp; dialog.hasOwnProperty(&quot;modalBar&quot;) &amp;&amp; dialog.modalBar) {
            &#x2F;&#x2F; The modalBar was already up. When creating the new modalBar, copy the
            &#x2F;&#x2F; current query instead of using the passed-in selected text.
            initialString = dialog.getDialogTextField().val();
            dialog._close(true);
        }
        
        &#x2F;&#x2F; Save the currently selected file&#39;s fullpath if there is one selected and if it is a file
        var selectedItem = ProjectManager.getSelectedItem();
        if (selectedItem &amp;&amp; !selectedItem.isDirectory) {
            selectedEntry = selectedItem.fullPath;
        }
        
        dialog             = new FindInFilesDialog();
        searchResults      = {};
        currentStart       = 0;
        currentQuery       = &quot;&quot;;
        currentQueryExpr   = null;
        currentScope       = scope;
        maxHitsFoundInFile = false;
        exports._searchResults = null;  &#x2F;&#x2F; for unit tests
                            
        dialog.showDialog(initialString, scope);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_doFindInSubtree</h4>
              <div class="description"><p>Search within the file/subtree defined by the sidebar selection</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _doFindInSubtree() {
        var selectedEntry = ProjectManager.getSelectedItem();
        _doFindInFiles(selectedEntry);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_doSearch</h4>
              <div class="description"><p>Executes the Find in Files search inside the &#39;currentScope&#39;</p>
</div>
              <dl>
                  <dt>query</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>String to be searched</dd>
                  <dt>candidateFilesPromise</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">$.Promise</dd>
                  <dd>Promise from getCandidateFiles(), which was called earlier</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _doSearch(query, candidateFilesPromise) {
        currentQuery     = query;
        currentQueryExpr = _getQueryRegExp(query);
        
        if (!currentQueryExpr) {
            StatusBar.hideBusyIndicator();
            dialog._close();
            return;
        }
        
        var scopeName = currentScope ? currentScope.fullPath : ProjectManager.getProjectRoot().fullPath,
            perfTimer = PerfUtils.markStart(&quot;FindIn: &quot; + scopeName + &quot; - &quot; + query);
        
        candidateFilesPromise
            .then(function (fileListResult) {
                &#x2F;&#x2F; Filter out files&#x2F;folders that match user&#39;s current exclusion filter
                fileListResult = FileFilters.filterFileList(currentFilter, fileListResult);
                
                if (fileListResult.length) {
                    return Async.doInParallel(fileListResult, _doSearchInOneFile);
                } else {
                    return ZERO_FILES_TO_SEARCH;
                }
            })
            .done(function (zeroFilesToken) {
                &#x2F;&#x2F; Done searching all files: show results
                _sortResultFiles();
                _showSearchResults(zeroFilesToken);
                StatusBar.hideBusyIndicator();
                PerfUtils.addMeasurement(perfTimer);
                
                &#x2F;&#x2F; Listen for FS &amp; Document changes to keep results up to date
                if (!$.isEmptyObject(searchResults)) {
                    _addListeners();
                }
                
                exports._searchResults = searchResults;  &#x2F;&#x2F; for unit tests
            })
            .fail(function (err) {
                console.log(&quot;find in files failed: &quot;, err);
                StatusBar.hideBusyIndicator();
                PerfUtils.finalizeMeasurement(perfTimer);
            });
    }
    
    
    &#x2F;&#x2F; This dialog class was mostly copied from QuickOpen. We should have a common dialog
    &#x2F;&#x2F; class that everyone can use.</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_doSearchInOneFile</h4>
              <div class="description"><p>Finds search results in the given file and adds them to &#39;searchResults.&#39; Resolves with
true if any matches found, false if none found. Errors reading the file are treated the
same as if no results found.</p>
<p>Does not perform any filtering - assumes caller has already vetted this file as a search
candidate.</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _doSearchInOneFile(file) {
        var result = new $.Deferred();
        
        DocumentManager.getDocumentText(file)
            .done(function (text) {
                var foundMatches = _addSearchMatches(file.fullPath, text, currentQueryExpr);
                result.resolve(foundMatches);
            })
            .fail(function () {
                &#x2F;&#x2F; Always resolve. If there is an error, this file
                &#x2F;&#x2F; is skipped and we move on to the next file.
                result.resolve();
            });
        
        return result.promise();
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_fileNameChangeHandler</h4>
              <div class="description"><p>Moves the search results from the previous path to the new one and updates the results list, if required</p>
</div>
              <dl>
                  <dt>event</dt>
                  <dd class="label label-info pull-left">$.Event</dd>
                  <dd></dd>
                  <dt>oldName</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd></dd>
                  <dt>newName</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _fileNameChangeHandler(event, oldName, newName) {
        var resultsChanged = false;
        
        if (searchResultsPanel.isVisible()) {
            &#x2F;&#x2F; Update the search results
            _.forEach(searchResults, function (item, fullPath) {
                if (fullPath.match(oldName)) {
                    searchResults[fullPath.replace(oldName, newName)] = item;
                    delete searchResults[fullPath];
                    resultsChanged = true;
                }
            });

            &#x2F;&#x2F; Restore the results if needed
            if (resultsChanged) {
                _sortResultFiles();
                _restoreSearchResults();
            }
        }
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getLastCurrentStart</h4>
              <div class="description"><p>Returns the last possible current start based on the given number of matches</p>
</div>
              <dl>
                  <dt>numMatches</dt>
                  <dd class="label label-info pull-left">number</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _getLastCurrentStart(numMatches) {
        return Math.floor((numMatches - 1) &#x2F; RESULTS_PER_PAGE) * RESULTS_PER_PAGE;
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getQueryRegExp</h4>
              <div class="description"><p>Returns a regular expression from the given query and shows an error in the modal-bar if it was invalid</p>
</div>
              <dl>
                  <dt>query</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd>The query from the modal-bar input</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _getQueryRegExp(query) {
        $(&quot;.modal-bar .error&quot;).hide();  &#x2F;&#x2F; Clear any pending RegEx error message
        
        if (!query) {
            return null;
        }

        var caseSensitive = $(&quot;#find-case-sensitive&quot;).is(&quot;.active&quot;);
        
        &#x2F;&#x2F; Is it a (non-blank) regex?
        if ($(&quot;#find-regexp&quot;).is(&quot;.active&quot;)) {
            try {
                return new RegExp(query, caseSensitive ? &quot;g&quot; : &quot;gi&quot;);
            } catch (e) {
                $(&quot;.modal-bar .error&quot;)
                    .show()
                    .text(e.message);
                return null;
            }
        
        } else {
            &#x2F;&#x2F; Query is a plain string. Turn it into a regexp
            return new RegExp(StringUtils.regexEscape(query), caseSensitive ? &quot;g&quot; : &quot;gi&quot;);
        }
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_getSearchMatches</h4>
              <div class="description"><p>Searches through the contents an returns an array of matches</p>
</div>
              <dl>
                  <dt>contents</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd></dd>
                  <dt>queryExpr</dt>
                  <dd class="label label-info pull-left">RegExp</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _getSearchMatches(contents, queryExpr) {
        &#x2F;&#x2F; Quick exit if not found
        if (contents.search(queryExpr) === -1) {
            return null;
        }
        
        var match, lineNum, line, ch, matchLength,
            lines   = StringUtils.getLines(contents),
            matches = [];
        
        while ((match = queryExpr.exec(contents)) !== null) {
            lineNum     = StringUtils.offsetToLineNum(lines, match.index);
            line        = lines[lineNum];
            ch          = match.index - contents.lastIndexOf(&quot;\n&quot;, match.index) - 1;  &#x2F;&#x2F; 0-based index
            matchLength = match[0].length;
            
            &#x2F;&#x2F; Don&#39;t store more than 200 chars per line
            line = line.substr(0, Math.min(200, line.length));
            
            matches.push({
                start: {line: lineNum, ch: ch},
                end:   {line: lineNum, ch: ch + matchLength},
                line:  line
            });

            &#x2F;&#x2F; We have the max hits in just this 1 file. Stop searching this file.
            &#x2F;&#x2F; This fixed issue #1829 where code hangs on too many hits.
            if (matches.length &gt;= FIND_IN_FILE_MAX) {
                queryExpr.lastIndex = 0;
                maxHitsFoundInFile = true;
                break;
            }
        }

        return matches;
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_hideSearchResults</h4>
              <div class="description"><p>Hides the Search Results Panel</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _hideSearchResults() {
        if (searchResultsPanel.isVisible()) {
            searchResultsPanel.hide();
        }
        _removeListeners();
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_inSearchScope</h4>
              <div class="description"><p>Checks that the file is eligible for inclusion in the search (matches the user&#39;s subtree scope and
file exclusion filters, and isn&#39;t binary). Used when updating results incrementally - during the
initial search, these checks are done in bulk via getCandidateFiles() and the filterFileList() call
after it.</p>
</div>
              <dl>
                  <dt>file</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">File</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _inSearchScope(file) {
        &#x2F;&#x2F; Replicate the checks getCandidateFiles() does
        if (currentScope) {
            if (!_subtreeFilter(file, currentScope)) {
                return false;
            }
        } else {
            &#x2F;&#x2F; Still need to make sure it&#39;s within project or working set
            &#x2F;&#x2F; In getCandidateFiles(), this is covered by the baseline getAllFiles() itself
            if (file.fullPath.indexOf(ProjectManager.getProjectRoot().fullPath) !== 0) {
                var inWorkingSet = DocumentManager.getWorkingSet().some(function (wsFile) {
                    return wsFile.fullPath === file.fullPath;
                });
                if (!inWorkingSet) {
                    return false;
                }
            }
        }

        if (!_isReadableText(file.fullPath)) {
            return false;
        }
        
        &#x2F;&#x2F; Replicate the filtering filterFileList() does
        return FileFilters.filterPath(currentFilter, file.fullPath);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_isReadableText</h4>
              <div class="description"><p>Filters out files that are known binary types.</p>
</div>
              <dl>
                  <dt>fullPath</dt>
                  <dd class="label label-info pull-left">string</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _isReadableText(fullPath) {
        return !LanguageManager.getLanguageForPath(fullPath).isBinary();
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_labelForScope</h4>
              <div class="description"><p>Returns label text to indicate the search scope. Already HTML-escaped.</p>
</div>
              <dl>
                  <dt>scope</dt>
                    <span class="label label-nullable pull-left">nullable</span>
                  <dd class="label label-info pull-left">Entry</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _labelForScope(scope) {
        var projName = ProjectManager.getProjectRoot().name;
        if (scope) {
            return StringUtils.format(
                Strings.FIND_IN_FILES_SCOPED,
                StringUtils.breakableUrl(
                    ProjectManager.makeProjectRelativeIfPossible(scope.fullPath)
                )
            );
        } else {
            return Strings.FIND_IN_FILES_NO_SCOPE;
        }
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_removeListeners</h4>
              <div class="description"><p>Remove listeners that were tracking potential search result changes</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _removeListeners() {
        $(DocumentModule).off(&quot;.findInFiles&quot;);
        FileSystem.off(&quot;change&quot;, _fileSystemChangeHandler);
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_removeSearchResultsForEntry</h4>
              <div class="description"><p>Remove existing search results that match the given entry&#39;s path</p>
</div>
              <dl>
                  <dt>entry</dt>
                  <dd class="label label-info pull-left">(File,Directory)</dd>
                  <dd></dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _removeSearchResultsForEntry(entry) {
            Object.keys(searchResults).forEach(function (fullPath) {
                if (fullPath.indexOf(entry.fullPath) === 0) {
                    delete searchResults[fullPath];
                    resultsChanged = true;
                }
            });
        }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_restoreSearchResults</h4>
              <div class="description"><p>Shows the search results and tries to restore the previous scroll and selection</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _restoreSearchResults() {
        if (searchResultsPanel.isVisible()) {
            var scrollTop  = $searchContent.scrollTop(),
                index      = $selectedRow ? $selectedRow.index() : null,
                numMatches = _countFilesMatches().matches;
            
            if (currentStart &gt; numMatches) {
                currentStart = _getLastCurrentStart(numMatches);
            }
            _showSearchResults();
            
            $searchContent.scrollTop(scrollTop);
            if (index) {
                $selectedRow = $searchContent.find(&quot;tr:eq(&quot; + index + &quot;)&quot;);
                $selectedRow.addClass(&quot;selected&quot;);
            }
        }
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_showSearchResults</h4>
              <div class="description"><p>Shows the results in a table and adds the necessary event listeners</p>
</div>
              <dl>
                  <dt>zeroFilesToken</dt>
                    <span class="label label-nullable pull-left">nullable</span>
                  <dd class="label label-info pull-left">Object</dd>
                  <dd>The 'ZERO_FILES_TO_SEARCH' token, if no results found for this reason</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _showSearchResults(zeroFilesToken) {
        if (!$.isEmptyObject(searchResults)) {
            var count = _countFilesMatches();
            
            &#x2F;&#x2F; Show result summary in header
            var numMatchesStr = &quot;&quot;;
            if (maxHitsFoundInFile) {
                numMatchesStr = Strings.FIND_IN_FILES_MORE_THAN;
            }

            &#x2F;&#x2F; This text contains some formatting, so all the strings are assumed to be already escaped
            var summary = StringUtils.format(
                Strings.FIND_IN_FILES_TITLE_PART3,
                numMatchesStr,
                String(count.matches),
                (count.matches &gt; 1) ? Strings.FIND_IN_FILES_MATCHES : Strings.FIND_IN_FILES_MATCH,
                count.files,
                (count.files &gt; 1 ? Strings.FIND_IN_FILES_FILES : Strings.FIND_IN_FILES_FILE)
            );
            
            &#x2F;&#x2F; The last result index displayed
            var last = Math.min(currentStart + RESULTS_PER_PAGE, count.matches);
            
            &#x2F;&#x2F; Insert the search summary
            $searchSummary.html(Mustache.render(searchSummaryTemplate, {
                query:    currentQuery,
                scope:    currentScope ? &quot;&amp;nbsp;&quot; + _labelForScope(currentScope) + &quot;&amp;nbsp;&quot; : &quot;&quot;,
                summary:  summary,
                hasPages: count.matches &gt; RESULTS_PER_PAGE,
                results:  StringUtils.format(Strings.FIND_IN_FILES_PAGING, currentStart + 1, last),
                hasPrev:  currentStart &gt; 0,
                hasNext:  last &lt; count.matches,
                Strings:  Strings
            }));
            
            &#x2F;&#x2F; Create the results template search list
            var searchItems, match, i, item,
                searchList     = [],
                matchesCounter = 0,
                showMatches    = false;
            
            &#x2F;&#x2F; Iterates throuh the files to display the results sorted by filenamess. The loop ends as soon as
            &#x2F;&#x2F; we filled the results for one page
            searchFiles.some(function (fullPath) {
                showMatches = true;
                item = searchResults[fullPath];
                
                &#x2F;&#x2F; Since the amount of matches on this item plus the amount of matches we skipped until
                &#x2F;&#x2F; now is still smaller than the first match that we want to display, skip these.
                if (matchesCounter + item.matches.length &lt; currentStart) {
                    matchesCounter += item.matches.length;
                    showMatches = false;
                
                &#x2F;&#x2F; If we still haven&#39;t skipped enough items to get to the first match, but adding the
                &#x2F;&#x2F; item matches to the skipped ones is greater the the first match we want to display,
                &#x2F;&#x2F; then we can display the matches from this item skipping the first ones
                } else if (matchesCounter &lt; currentStart) {
                    i = currentStart - matchesCounter;
                    matchesCounter = currentStart;
                
                &#x2F;&#x2F; If we already skipped enough matches to get to the first match to display, we can start
                &#x2F;&#x2F; displaying from the first match of this item
                } else if (matchesCounter &lt; last) {
                    i = 0;
                
                &#x2F;&#x2F; We can&#39;t display more items by now. Break the loop
                } else {
                    return true;
                }
                
                if (showMatches &amp;&amp; i &lt; item.matches.length) {
                    &#x2F;&#x2F; Add a row for each match in the file
                    searchItems = [];
                    
                    &#x2F;&#x2F; Add matches until we get to the last match of this item, or filling the page
                    while (i &lt; item.matches.length &amp;&amp; matchesCounter &lt; last) {
                        match = item.matches[i];
                        searchItems.push({
                            file:      searchList.length,
                            item:      searchItems.length,
                            line:      match.start.line + 1,
                            pre:       match.line.substr(0, match.start.ch),
                            highlight: match.line.substring(match.start.ch, match.end.ch),
                            post:      match.line.substr(match.end.ch),
                            start:     match.start,
                            end:       match.end
                        });
                        matchesCounter++;
                        i++;
                    }
                                                            
                    &#x2F;&#x2F; Add a row for each file
                    var relativePath = FileUtils.getDirectoryPath(ProjectManager.makeProjectRelativeIfPossible(fullPath)),
                        directoryPath = FileUtils.getDirectoryPath(relativePath),
                        displayFileName = StringUtils.format(
                            Strings.FIND_IN_FILES_FILE_PATH,
                            StringUtils.breakableUrl(FileUtils.getBaseName(fullPath)),
                            StringUtils.breakableUrl(directoryPath),
                            directoryPath ? &quot;&amp;mdash;&quot; : &quot;&quot;
                        );

                    searchList.push({
                        file:     searchList.length,
                        filename: displayFileName,
                        fullPath: fullPath,
                        items:    searchItems
                    });
                }
            });
            
            &#x2F;&#x2F; Add the listeners for close, prev and next
            $searchResults
                .off(&quot;.searchList&quot;)  &#x2F;&#x2F; Remove the old events
                .one(&quot;click.searchList&quot;, &quot;.close&quot;, function () {
                    _hideSearchResults();
                })
                &#x2F;&#x2F; The link to go the first page
                .one(&quot;click.searchList&quot;, &quot;.first-page:not(.disabled)&quot;, function () {
                    currentStart = 0;
                    _showSearchResults();
                })
                &#x2F;&#x2F; The link to go the previous page
                .one(&quot;click.searchList&quot;, &quot;.prev-page:not(.disabled)&quot;, function () {
                    currentStart -= RESULTS_PER_PAGE;
                    _showSearchResults();
                })
                &#x2F;&#x2F; The link to go to the next page
                .one(&quot;click.searchList&quot;, &quot;.next-page:not(.disabled)&quot;, function () {
                    currentStart += RESULTS_PER_PAGE;
                    _showSearchResults();
                })
                &#x2F;&#x2F; The link to go to the last page
                .one(&quot;click.searchList&quot;, &quot;.last-page:not(.disabled)&quot;, function () {
                    currentStart = _getLastCurrentStart(count.matches);
                    _showSearchResults();
                });
            
            &#x2F;&#x2F; Insert the search results
            $searchContent
                .empty()
                .append(Mustache.render(searchResultsTemplate, {searchList: searchList, Strings: Strings}))
                .off(&quot;.searchList&quot;)  &#x2F;&#x2F; Remove the old events
            
                &#x2F;&#x2F; Add the click event listener directly on the table parent
                .on(&quot;click.searchList&quot;, function (e) {
                    var $row = $(e.target).closest(&quot;tr&quot;);
                    
                    if ($row.length) {
                        if ($selectedRow) {
                            $selectedRow.removeClass(&quot;selected&quot;);
                        }
                        $row.addClass(&quot;selected&quot;);
                        $selectedRow = $row;
                        
                        var searchItem = searchList[$row.data(&quot;file&quot;)],
                            fullPath   = searchItem.fullPath;
                        
                        &#x2F;&#x2F; This is a file title row, expand&#x2F;collapse on click
                        if ($row.hasClass(&quot;file-section&quot;)) {
                            var $titleRows,
                                collapsed = !searchResults[fullPath].collapsed;
                            
                            if (e.metaKey || e.ctrlKey) { &#x2F;&#x2F;Expand all &#x2F; Collapse all
                                $titleRows = $(e.target).closest(&quot;table&quot;).find(&quot;.file-section&quot;);
                            } else {
                                &#x2F;&#x2F; Clicking the file section header collapses&#x2F;expands result rows for that file
                                $titleRows = $row;
                            }
                            
                            $titleRows.each(function () {
                                fullPath   = searchList[$(this).data(&quot;file&quot;)].fullPath;
                                searchItem = searchResults[fullPath];

                                if (searchItem.collapsed !== collapsed) {
                                    searchItem.collapsed = collapsed;
                                    $(this).nextUntil(&quot;.file-section&quot;).toggle();
                                    $(this).find(&quot;.disclosure-triangle&quot;).toggleClass(&quot;expanded&quot;).toggleClass(&quot;collapsed&quot;);
                                }
                            });
                            
                            &#x2F;&#x2F;In Expand&#x2F;Collapse all, reset all search results &#39;collapsed&#39; flag to same value(true&#x2F;false).
                            if (e.metaKey || e.ctrlKey) {
                                _.forEach(searchResults, function (item) {
                                    item.collapsed = collapsed;
                                });
                            }
                        &#x2F;&#x2F; This is a file row, show the result on click
                        } else {
                            &#x2F;&#x2F; Grab the required item data
                            var item = searchItem.items[$row.data(&quot;item&quot;)];
                            
                            CommandManager.execute(Commands.FILE_OPEN, {fullPath: fullPath})
                                .done(function (doc) {
                                    &#x2F;&#x2F; Opened document is now the current main editor
                                    EditorManager.getCurrentFullEditor().setSelection(item.start, item.end, true);
                                });
                        }
                    }
                })
                &#x2F;&#x2F; Add the file to the working set on double click
                .on(&quot;dblclick.searchList&quot;, &quot;tr:not(.file-section)&quot;, function (e) {
                    var item = searchList[$(this).data(&quot;file&quot;)];
                    FileViewController.addToWorkingSetAndSelect(item.fullPath);
                })
                &#x2F;&#x2F; Restore the collapsed files
                .find(&quot;.file-section&quot;).each(function () {
                    var fullPath = searchList[$(this).data(&quot;file&quot;)].fullPath;
                    
                    if (searchResults[fullPath].collapsed) {
                        searchResults[fullPath].collapsed = false;
                        $(this).trigger(&quot;click&quot;);
                    }
                });
            
            if ($selectedRow) {
                $selectedRow.removeClass(&quot;selected&quot;);
                $selectedRow = null;
            }
            searchResultsPanel.show();
            $searchContent.scrollTop(0); &#x2F;&#x2F; Otherwise scroll pos from previous contents is remembered

            if (dialog) {
                dialog._close();
            }
            
        } else {
            _hideSearchResults();

            if (dialog) {
                dialog.getDialogTextField()
                    .addClass(&quot;no-results&quot;)
                    .removeAttr(&quot;disabled&quot;)
                    .get(0).select();
                if (zeroFilesToken === ZERO_FILES_TO_SEARCH) {
                    $(&quot;.modal-bar .error&quot;)
                        .show()
                        .html(StringUtils.format(Strings.FIND_IN_FILES_ZERO_FILES, _labelForScope(currentScope)));
                } else {
                    $(&quot;.modal-bar .no-results-message&quot;).show();
                }
            }
        }
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_sortResultFiles</h4>
              <div class="description"><p>Sorts the file keys to show the results from the selected file first and the rest sorted by path</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _sortResultFiles() {
        searchFiles = Object.keys(searchResults);
        searchFiles.sort(function (key1, key2) {
            if (selectedEntry === key1) {
                return -1;
            } else if (selectedEntry === key2) {
                return 1;
            }
            
            var entryName1, entryName2,
                pathParts1 = key1.split(&quot;&#x2F;&quot;),
                pathParts2 = key2.split(&quot;&#x2F;&quot;),
                length     = Math.min(pathParts1.length, pathParts2.length),
                folders1   = pathParts1.length - 1,
                folders2   = pathParts2.length - 1,
                index      = 0;
            
            while (index &lt; length) {
                entryName1 = pathParts1[index];
                entryName2 = pathParts2[index];
                
                if (entryName1 !== entryName2) {
                    if (index &lt; folders1 &amp;&amp; index &lt; folders2) {
                        return entryName1.toLocaleLowerCase().localeCompare(entryName2.toLocaleLowerCase());
                    } else if (index &gt;= folders1 &amp;&amp; index &gt;= folders2) {
                        return FileUtils.compareFilenames(entryName1, entryName2);
                    }
                    return (index &gt;= folders1 &amp;&amp; index &lt; folders2) ? 1 : -1;
                }
                index++;
            }
            return 0;
        });
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_subtreeFilter</h4>
              <div class="description"><p>Checks that the file matches the given subtree scope. To fully check whether the file
should be in the search set, use _inSearchScope() instead - a supserset of this.</p>
</div>
              <dl>
                  <dt>file</dt>
                    <span class="label label-non-nullable pull-left">non-nullable</span>
                  <dd class="label label-info pull-left">File</dd>
                  <dd></dd>
                  <dt>scope</dt>
                    <span class="label label-nullable pull-left">nullable</span>
                  <dd class="label label-info pull-left">FileSystemEntry</dd>
                  <dd>Search scope, or null if whole project</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _subtreeFilter(file, scope) {
        if (scope) {
            if (scope.isDirectory) {
                &#x2F;&#x2F; Dirs always have trailing slash, so we don&#39;t have to worry about being
                &#x2F;&#x2F; a substring of another dir name
                return file.fullPath.indexOf(scope.fullPath) === 0;
            } else {
                return file.fullPath === scope.fullPath;
            }
        }
        return true;
    }</code></pre>
            </div>
            <div class="member private">
              <span class="pull-right scope">
                Private
                
              </span>
              <h4>_updateSearchResults</h4>
              <div class="description"><p>Update the search results using the given list of changes fr the given document</p>
</div>
              <dl>
                  <dt>doc</dt>
                  <dd class="label label-info pull-left">Document</dd>
                  <dd>The Document that changed, should be the current one</dd>
                  <dt>changeList
</dt>
                  <dd class="label label-info pull-left">Array.&lt;{from: {line:number,ch:number},to: {line:number,ch:number},text: string,next: change}&gt;</dd>
                  <dd>An array of changes as described in the Document constructor</dd>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function _updateSearchResults(doc, changeList) {
        var i, diff, matches,
            resultsChanged = false,
            fullPath = doc.file.fullPath,
            lines, start, howMany;
        
        changeList.forEach(function (change) {
            lines = [];
            start = 0;
            howMany = 0;

            &#x2F;&#x2F; There is no from or to positions, so the entire file changed, we must search all over again
            if (!change.from || !change.to) {
                _addSearchMatches(fullPath, doc.getText(), currentQueryExpr);
                resultsChanged = true;

            } else {
                &#x2F;&#x2F; Get only the lines that changed
                for (i = 0; i &lt; change.text.length; i++) {
                    lines.push(doc.getLine(change.from.line + i));
                }

                &#x2F;&#x2F; We need to know how many lines changed to update the rest of the lines
                if (change.from.line !== change.to.line) {
                    diff = change.from.line - change.to.line;
                } else {
                    diff = lines.length - 1;
                }

                if (searchResults[fullPath]) {
                    &#x2F;&#x2F; Search the last match before a replacement, the amount of matches deleted and update
                    &#x2F;&#x2F; the lines values for all the matches after the change
                    searchResults[fullPath].matches.forEach(function (item) {
                        if (item.end.line &lt; change.from.line) {
                            start++;
                        } else if (item.end.line &lt;= change.to.line) {
                            howMany++;
                        } else {
                            item.start.line += diff;
                            item.end.line   += diff;
                        }
                    });

                    &#x2F;&#x2F; Delete the lines that where deleted or replaced
                    if (howMany &gt; 0) {
                        searchResults[fullPath].matches.splice(start, howMany);
                    }
                    resultsChanged = true;
                }

                &#x2F;&#x2F; Searches only over the lines that changed
                matches = _getSearchMatches(lines.join(&quot;\r\n&quot;), currentQueryExpr);
                if (matches &amp;&amp; matches.length) {
                    &#x2F;&#x2F; Updates the line numbers, since we only searched part of the file
                    matches.forEach(function (value, key) {
                        matches[key].start.line += change.from.line;
                        matches[key].end.line   += change.from.line;
                    });

                    &#x2F;&#x2F; If the file index exists, add the new matches to the file at the start index found before
                    if (searchResults[fullPath]) {
                        Array.prototype.splice.apply(searchResults[fullPath].matches, [start, 0].concat(matches));
                    &#x2F;&#x2F; If not, add the matches to a new file index
                    } else {
                        searchResults[fullPath] = {
                            matches:   matches,
                            collapsed: false
                        };
                    }
                    resultsChanged = true;
                }

                &#x2F;&#x2F; All the matches where deleted, remove the file from the results
                if (searchResults[fullPath] &amp;&amp; !searchResults[fullPath].matches.length) {
                    delete searchResults[fullPath];
                    resultsChanged = true;
                }
            }
        });
        
        return resultsChanged;
    }</code></pre>
            </div>
            <div class="member">
              <span class="pull-right scope">
                
                
              </span>
              <h4>getCandidateFiles</h4>
              <div class="description"><p>Finds all candidate files to search in currentScope&#39;s subtree that are not binary content. Does NOT apply
currentFilter yet.</p>
</div>
              <dl>
              </dl>
              <button class="btn btn-small show-code">Show code</button>
              <pre class="language-javascript"><code class="language-javascript">function getCandidateFiles() {
        function filter(file) {
            return _subtreeFilter(file, currentScope) &amp;&amp; _isReadableText(file.fullPath);
        }
        
        return ProjectManager.getAllFiles(filter, true);
    }</code></pre>
            </div>
            
          </section>
          
          <section class="classes">
            <h2>Classes</h2>
            
              <div class="well">
                <div class="member public">
                  <span class="pull-right scope">
                    Constructor
                  </span>
                  <h4>FindInFilesDialog</h4>
                  <em><p>FindInFilesDialog class</p>
</em>
                  <dl>
                  </dl>
                  
                  <button class="btn btn-small show-code">Show code</button>
                  <pre class="language-javascript"><code class="language-javascript">function FindInFilesDialog() {
        this.closed = false;
    }</code></pre>
                </div>
      
      
                <section class="methods">
                  <h3>Methods 
                    <label class="checkbox">
                      <input class="toggle-public" type="checkbox"> Show Private Members
                    </label>
                  </h3>
                  
                  <div class="member private">
                    <span class="pull-right scope">
                      Private
                      
                    </span>
                    <h4>_close</h4>
                    <div class="description"><p>Closes the search dialog and resolves the promise that showDialog returned.</p>
</div>
                    <dl>
                      <dt>suppressAnimation</dt>
                      <dd class="label label-info pull-left">boolean</dd>
                      <dd>Used to hide the search bar immediately, when another
 one is synchronously about to be shown.</dd>
                    </dl>
                    <dl>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">FindInFilesDialog.prototype._close = function (suppressAnimation) {
        if (this.closed) {
            return;
        }
        this.modalBar.close(true, !suppressAnimation);
    };
    
    FindInFilesDialog.prototype._handleClose = function () {
        &#x2F;&#x2F; Hide error popup, since it hangs down low enough to make the slide-out look awkward
        $(&quot;.modal-bar .error&quot;).hide();
        
        this.closed = true;
        EditorManager.focusEditor();
        dialog = null;
    };</code></pre>
                  </div>
                  <div class="member">
                    <span class="pull-right scope">
                      
                      
                    </span>
                    <h4>getDialogTextField</h4>
                    <div class="description"><p>Returns the input text field of the modalbar in the dialog</p>
</div>
                    <dl>
                    </dl>
                    <dl>
                      <dt>Returns: </dt>
                      <dd class="label label-info pull-left">jQuery</dd>
                      <dd>Object pointing to input text field</dd>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">FindInFilesDialog.prototype.getDialogTextField = function () {
        return $(&quot;input[type=&#39;text&#39;]&quot;, this.modalBar.getRoot());
    };</code></pre>
                  </div>
                  <div class="member">
                    <span class="pull-right scope">
                      
                      
                    </span>
                    <h4>showDialog</h4>
                    <div class="description"><p>Shows the search dialog</p>
</div>
                    <dl>
                      <dt>initialString</dt>
                      <dd class="label label-info pull-left">string</dd>
                      <dd>Default text to prepopulate the search field with</dd>
                      <dt>scope</dt>
                      <dd class="label label-info pull-left">Entry</dd>
                      <dd>Search scope, or null to search whole project</dd>
                    </dl>
                    <dl>
                    </dl>
                    <button class="btn btn-small show-code">Show code</button>
                    <pre class="language-javascript"><code class="language-javascript">FindInFilesDialog.prototype.showDialog = function (initialString, scope) {
        &#x2F;&#x2F; Note the prefix label is a simple &quot;Find:&quot; - the &quot;in ...&quot; part comes after the text field
        var templateVars = {
                value: initialString || &quot;&quot;,
                label: _labelForScope(scope)
            },
            dialogHTML = Mustache.render(searchDialogTemplate, $.extend(templateVars, Strings)),
            that       = this;
        
        &#x2F;&#x2F; Synchronously close Find&#x2F;Replace bar first, if open (TODO: remove once #6203 fixed)
        &#x2F;&#x2F; (Any previous open FindInFiles bar instance was already handled by our caller)
        FindReplace._closeFindBar();
        
        this.modalBar    = new ModalBar(dialogHTML, true);
        $(this.modalBar).on(&quot;close&quot;, this._handleClose.bind(this));
        
        &#x2F;&#x2F; Custom closing behavior: if in the middle of executing search, blur shouldn&#39;t close ModalBar yet. And
        &#x2F;&#x2F; don&#39;t close bar when opening Edit Filter dialog either.
        var self = this;
        this.modalBar.isLockedOpen = function () {
            return self.getDialogTextField().attr(&quot;disabled&quot;) || $(&quot;.modal.instance .exclusions-editor&quot;).length &gt; 0;
        };
        
        var $searchField = $(&quot;input#find-what&quot;),
            candidateFilesPromise = getCandidateFiles(),  &#x2F;&#x2F; used for eventual search, and in exclusions editor UI
            filterPicker;
        
        function handleQueryChange() {
            &#x2F;&#x2F; Check the query expression on every input event. This way the user is alerted
            &#x2F;&#x2F; to any RegEx syntax errors immediately.
            var query = _getQueryRegExp($searchField.val());
            
            &#x2F;&#x2F; Clear any no-results indicator since query has changed
            &#x2F;&#x2F; But input field may still have error style if its content is an invalid regexp
            that.getDialogTextField().toggleClass(&quot;no-results&quot;, Boolean($searchField.val() &amp;&amp; query === null));
            $(&quot;.modal-bar .no-results-message&quot;).hide();
        }
        
        $searchField.get(0).select();
        $searchField
            .bind(&quot;keydown&quot;, function (event) {
                if (event.keyCode === KeyEvent.DOM_VK_RETURN || event.keyCode === KeyEvent.DOM_VK_ESCAPE) {  &#x2F;&#x2F; Enter&#x2F;Return key or Esc key
                    event.stopPropagation();
                    event.preventDefault();
                    
                    var query = $searchField.val();
                    
                    if (event.keyCode === KeyEvent.DOM_VK_ESCAPE) {
                        that._close();
                    } else if (event.keyCode === KeyEvent.DOM_VK_RETURN) {
                        StatusBar.showBusyIndicator(true);
                        that.getDialogTextField().attr(&quot;disabled&quot;, &quot;disabled&quot;);
                        
                        if (filterPicker) {
                            currentFilter = FileFilters.commitPicker(filterPicker);
                        } else {
                            &#x2F;&#x2F; Single-file scope: don&#39;t use any file filters
                            currentFilter = null;
                        }
                        _doSearch(query, candidateFilesPromise);
                    }
                }
            })
            .bind(&quot;input&quot;, handleQueryChange)
            .focus();
        
        this.modalBar.getRoot().on(&quot;click&quot;, &quot;#find-case-sensitive, #find-regexp&quot;, function (e) {
            $(e.currentTarget).toggleClass(&#39;active&#39;);
            FindReplace._updatePrefsFromSearchBar();
            
            handleQueryChange();  &#x2F;&#x2F; re-validate regexp if needed
        });
        
        &#x2F;&#x2F; Show file-exclusion UI *unless* search scope is just a single file
        if (!scope || scope.isDirectory) {
            var exclusionsContext = {
                label: _labelForScope(scope),
                promise: candidateFilesPromise
            };

            filterPicker = FileFilters.createFilterPicker(exclusionsContext);
            this.modalBar.getRoot().find(&quot;#find-group&quot;).append(filterPicker);
        }
        
        &#x2F;&#x2F; Initial UI state (including prepopulated initialString passed into template)
        FindReplace._updateSearchBarFromPrefs();
        handleQueryChange();
    };</code></pre>
                  </div>
                </section>
                
              </div>
            
          </section>
          
        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>